{"version":3,"sources":["../src/js/script.js"],"names":[],"mappings":"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","file":"script.js","sourcesContent":["const baseURL = 'https://pokeapi.co/api/v2/';\r\nconst pokemonURL = identifier => `${baseURL}pokemon/${identifier}/`;\r\nconst pokedexEntry = identifier => `${baseURL}pokemon-species/${identifier}/`;\r\nconst typeDesc = identifier => `${baseURL}type/${identifier}/`;\r\n\r\nconst getData = (param, toGet) => {\r\n    switch (toGet) {\r\n        case 'pokemon':\r\n            param = pokemonURL(param);\r\n            break;\r\n        case 'pokedex':\r\n            param = pokedexEntry(param);\r\n            break;\r\n        case 'type':\r\n            param = typeDesc(param);\r\n            break;\r\n        default:\r\n            return Promise.reject(\"Invalid request.\");\r\n            break;\r\n    }\r\n    let cacheKey = param\r\n    let cached = getFromCache(cacheKey)\r\n    if (cached) {\r\n        return Promise.resolve(cached)\r\n    }\r\n    return fetch(param).then(response => {\r\n        if (response.ok && response.status == 200) {\r\n            const contentType = response.headers.get('Content-Type') || '';\r\n            if (contentType.includes('application/json')) {\r\n                response.clone().text().then(content => {\r\n                    localStorage.setItem(cacheKey, content)\r\n                })\r\n                return response.json().catch(error => {\r\n                    return Promise.reject('Invalid JSON: ' + error.message);\r\n                });\r\n            } else {\r\n                return Promise.reject('Invalid content type: ' + contentType)\r\n            }\r\n        } else if (response.status == 400) {\r\n            return Promise.reject('Page not found: ' + url);\r\n        } else {\r\n            return Promise.reject('HTTP error: ' + response.status);\r\n        }\r\n    }).catch(error => {\r\n        return Promise.reject(error.message);\r\n    });\r\n}\r\n\r\n// const returnPromises = object => {\r\n//     let length = object.length,\r\n//         array = [],\r\n//         promise = new Promise( (resolve, reject) => {\r\n//             object.forEach( index => {\r\n//                 index.then( value => {\r\n//                     array.push(value[0]);\r\n//                     if (array.length == length) {\r\n//                         resolve(array);\r\n//                     }\r\n//                 })\r\n//             })\r\n//     });\r\n//     return promise;\r\n// }\r\n\r\nconst drawPokemon = pokemonData => {\r\n    let promise = new Promise( (resolve, reject) => {\r\n        const {\r\n            name,\r\n            id,\r\n            sprites: { front_default: image },\r\n            types,\r\n            stats\r\n        } = pokemonData;\r\n\r\n        // let lang_types = types.map( index => {\r\n        //    return getData(index.type.name, \"type\")\r\n        //         .then( type => {\r\n        //             return type.names.filter(value => {\r\n        //                 return value.language.name == \"es\"\r\n        //             })\r\n        //         })\r\n        // })\r\n\r\n        getData(name, 'pokedex')\r\n            .then(entry => {\r\n\r\n                const {\r\n                    habitat,\r\n                    egg_groups,\r\n                    flavor_text_entries,\r\n                } = entry;\r\n\r\n                let get_habitat = habitat == null ? 'none' : habitat.name;\r\n                let flavorText = flavor_text_entries[1].flavor_text;\r\n\r\n                const results = idSelector('results');\r\n                results.innerHTML = `\r\n                    <div class=\"row\">\r\n                        <div class=\"col-xs-8\">\r\n                            <div class = \"row\">\r\n                                <div class=\"col-xs-4\">\r\n                                    <img class=\"img-responsive center-block\" src=\"${image}\" />\r\n                                </div>\r\n                                <div class=\"col-xs-8\">\r\n                                    <p>N° ${id}</p>\r\n                                    <p>${capitalizeFirst(name)}</p>\r\n                                    <p>Type: ${types.map( value => {\r\n                                        return capitalizeFirst(value.type.name);\r\n                                    }).toLocaleString().replace(',',' - ')}</p>\r\n                                    <p>Egg groups: ${egg_groups.map( value => {\r\n                                        return capitalizeFirst(value.name);\r\n                                    }).toLocaleString().replace(',',' - ')}</p>\r\n                                    <p>Habitat: ${capitalizeFirst(get_habitat)}</p>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row\">\r\n                                <div class=\"col-xs-12\">\r\n                                    <p>${capitalizeFirst(flavorText)}</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"col-xs-4\">\r\n                            ${stats.reverse().map( value => {\r\n                                return `\r\n                                    <span class=\"tiny\">${value.stat.name.toUpperCase()} </span>\r\n                                    <div class=\"progress\">\r\n                                        <div class=\"progress-bar progress-bar-success\" role=\"progressbar\" aria-valuenow=\"80\" aria-valuemin=\"0\" aria-valuemax=\"100\" style=\"width: ${round(value.base_stat)}%\">\r\n                                            ${value.base_stat}\r\n                                        </div>\r\n                                    </div>`\r\n                            }).toLocaleString().replace(/(,)/g,'')}\r\n                        </div>\r\n                    </div>\r\n                `;\r\n                resolve(true);\r\n            })\r\n    })\r\n\r\n    return promise;\r\n}\r\n\r\nidSelector(\"main-form\").addEventListener(\"submit\", (event) => {\r\n    event.preventDefault();\r\n    let toSearch = idSelector(\"search-pkmn\");\r\n    let value = toSearch.value.toLowerCase();\r\n    if (value.length > 0) {\r\n        toSearch.style.background = '#FFF';\r\n        toggleSearchState(toSearch);\r\n        getData(value, 'pokemon').then( data => {\r\n            drawPokemon(data).then( () => {\r\n                toggleSearchState(toSearch);\r\n                $('#main-results').modal('show');\r\n            });\r\n        }).catch( error => {\r\n            toggleSearchState(toSearch);\r\n            alert(`Error de conexión.`)\r\n        })\r\n    } else {\r\n        toSearch.style.background = '#FFFFCC';\r\n        toSearch.focus();\r\n    }\r\n});\r\n\r\nfunction idSelector(id) {\r\n    return document.querySelector(`#${id}`);\r\n}\r\n\r\nfunction toggleSearchState(param){\r\n    let button = param.nextElementSibling;\r\n    if (param.disabled) {\r\n        button.querySelector('#loading').classList.add('hidden');\r\n        button.querySelector('#go').classList.remove('hidden');\r\n        param.disabled = false;\r\n        button.disabled = false;\r\n        param.value = '';\r\n    } else {\r\n        button.querySelector('#go').classList.add('hidden');\r\n        button.querySelector('#loading').classList.remove('hidden');\r\n        param.disabled = true;\r\n        button.disabled = true;\r\n    }\r\n}\r\n\r\nfunction round(num){\r\n    return Math.ceil((num * 100) / 190);\r\n}\r\n\r\nfunction capitalizeFirst(string) {\r\n    return string.charAt(0).toUpperCase() + string.slice(1);\r\n}\r\n\r\n// SIN USO\r\nfunction setInCache(id, data) {\r\n    localStorage.setItem(id, JSON.stringify(data));\r\n}\r\n\r\nfunction getFromCache(id) {\r\n    return localStorage.getItem(id) ? JSON.parse(localStorage.getItem(id)) : false;\r\n}\r\n\r\nfunction display(param){\r\n    console.log(param);\r\n}"]}